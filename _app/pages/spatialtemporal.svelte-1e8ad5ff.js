import{S as oe,i as ie,s as ue,ac as de,v as J,w as X,x as F,p as G,n as K,A as P,D as ve,J as W,ad as fe,ae as we,af as xe,ag as Q,ah as $e,ai as ke,aj as I,ak as B,a as C,d as w,b as o,f as L,X as re,al as he,Z as Me,t as le,g as ae,H as q,h as be,_ as _e,am as se,$ as me,an as Ee,j as Y,e as R,a9 as Se,l as ee,c as U}from"../chunks/vendor-b06d7aa0.js";import{A as Te,L as Ce}from"../chunks/LanguageChipBox-dde50c58.js";import{T as Ae}from"../chunks/ToolChipBox-cf13d19c.js";import{f as ze,t as Le}from"../chunks/stores-5605b9fc.js";function Ve(){let r=[],e=[],l=1,n=1,_=5,$=.5,p=.2,h=1,y=30,k=30,g=3;function m(s,t,a){let c=t.length,v=0,i=t[s].x-a[s].x,f=a[s].y-t[s].y,x=Math.sqrt(i*i+f*f),A=!0;x>0&&(v+=x*p),i/=x,f/=x,i>0&&f>0?v+=0*g:i<0&&f>0?v+=1*g:i<0&&f<0?v+=2*g:v+=3*g;let T=t[s].x,j=t[s].y-t[s].height+2,D=t[s].x+t[s].width,N=t[s].y+2,V,O,Z,u,z,H,te;for(let E=0;E<c;E++)E!=s&&(A=M(a[s].x,t[s].x,a[E].x,t[E].x,a[s].y,t[s].y,a[E].y,t[E].y),A&&(v+=h),V=t[E].x,Z=t[E].y-t[E].height+2,O=t[E].x+t[E].width,u=t[E].y+2,z=Math.max(0,Math.min(O,D)-Math.max(V,T)),H=Math.max(0,Math.min(u,N)-Math.max(Z,j)),te=z*H,v+=te*y),V=a[E].x-a[E].r,Z=a[E].y-a[E].r,O=a[E].x+a[E].r,u=a[E].y+a[E].r,z=Math.max(0,Math.min(O,D)-Math.max(V,T)),H=Math.max(0,Math.min(u,N)-Math.max(Z,j)),te=z*H,v+=te*k;return v}function S(s){let t=Math.floor(Math.random()*r.length),a=r[t].x,c=r[t].y,v=m(t,r,e);r[t].x+=(Math.random()-.5)*_,r[t].y+=(Math.random()-.5)*_,r[t].x>l&&(r[t].x=a),r[t].x<0&&(r[t].x=a),r[t].y>n&&(r[t].y=c),r[t].y<0&&(r[t].y=c);let f=m(t,r,e)-v;Math.random()<Math.exp(-f/s)||(r[t].x=a,r[t].y=c)}function d(s){let t=Math.floor(Math.random()*r.length),a=r[t].x,c=r[t].y,v=m(t,r,e),i=(Math.random()-.5)*$,f=Math.sin(i),x=Math.cos(i);r[t].x-=e[t].x,r[t].y-=e[t].y;let A=r[t].x*x-r[t].y*f,T=r[t].x*f+r[t].y*x;r[t].x=A+e[t].x,r[t].y=T+e[t].y,r[t].x>l&&(r[t].x=a),r[t].x<0&&(r[t].x=a),r[t].y>n&&(r[t].y=c),r[t].y<0&&(r[t].y=c);let D=m(t,r,e)-v;Math.random()<Math.exp(-D/s)||(r[t].x=a,r[t].y=c)}function M(s,t,a,c,v,i,f,x){let A,T,j,D,N;return j=(x-f)*(t-s)-(c-a)*(i-v),D=(c-a)*(v-f)-(x-f)*(s-a),N=(t-s)*(v-f)-(i-v)*(s-a),A=D/j,T=N/j,!(A<0||A>1||T<0||T>1)}function b(s,t,a){return s-t/a}return{start(s){let t=r.length,a=1,c=1;for(let v=0;v<s;v++){for(let i=0;i<t;i++)Math.random()<.5?S(a):d(a);a=b(a,c,s)}return this},width(s){return arguments.length?(l=s,this):l},height(s){return arguments.length?(n=s,this):n},label(s){return arguments.length?(r=s,this):r},anchor(s){return arguments.length?(e=s,this):e}}}function ce(r,e,l){const n=r.slice();return n[29]=e[l],n}function ge(r,e,l){const n=r.slice();return n[29]=e[l],n}function pe(r,e){let l,n,_,$,p,h,y,k;return{key:r,first:null,c(){l=I("rect"),this.h()},l(g){l=B(g,"rect",{fill:!0,"stroke-dasharray":!0,"fill-opacity":!0,x:!0,y:!0,width:!0,height:!0,"stroke-width":!0,stroke:!0}),C(l).forEach(w),this.h()},h(){o(l,"fill",n=e[7](e[29])),o(l,"stroke-dasharray","4"),o(l,"fill-opacity","0.25"),o(l,"x",_=e[11](e[29],e[3])),o(l,"y",$=e[12](e[29],e[2])),o(l,"width",p=e[13](e[29],e[3])),o(l,"height",h=e[14](e[29],e[2])),o(l,"stroke-width","1"),o(l,"stroke","black"),this.first=l},m(g,m){L(g,l,m),y||(k=[re(l,"mouseover",function(){he(e[15](e[29]))&&e[15](e[29]).apply(this,arguments)}),re(l,"focus",Ne),re(l,"mouseout",function(){he(e[16](e[29]))&&e[16](e[29]).apply(this,arguments)}),re(l,"blur",Ie)],y=!0)},p(g,m){e=g,m[0]&144&&n!==(n=e[7](e[29]))&&o(l,"fill",n),m[0]&24&&_!==(_=e[11](e[29],e[3]))&&o(l,"x",_),m[0]&20&&$!==($=e[12](e[29],e[2]))&&o(l,"y",$),m[0]&24&&p!==(p=e[13](e[29],e[3]))&&o(l,"width",p),m[0]&20&&h!==(h=e[14](e[29],e[2]))&&o(l,"height",h)},d(g){g&&w(l),y=!1,Me(k)}}}function ye(r,e){let l,n=e[29].name+"",_,$,p,h,y,k,g,m,S,d,M,b;return{key:r,first:null,c(){l=I("text"),_=le(n),y=I("line"),d=I("circle"),this.h()},l(s){l=B(s,"text",{class:!0,id:!0,x:!0,y:!0});var t=C(l);_=ae(t,n),t.forEach(w),y=B(s,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0}),C(y).forEach(w),d=B(s,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),C(d).forEach(w),this.h()},h(){o(l,"class","place-label"),o(l,"id",$=ne(e[29])),o(l,"x",p=e[29].x),o(l,"y",h=e[29].y),o(y,"x1",k=e[29].x),o(y,"y1",g=e[29].y),o(y,"x2",m=e[29].org_x),o(y,"y2",S=e[29].org_y),o(y,"stroke","black"),o(d,"cx",M=e[29].org_x),o(d,"cy",b=e[29].org_y),o(d,"r","2"),o(d,"fill","black"),this.first=l},m(s,t){L(s,l,t),q(l,_),L(s,y,t),L(s,d,t)},p(s,t){e=s,t[0]&64&&n!==(n=e[29].name+"")&&be(_,n),t[0]&64&&$!==($=ne(e[29]))&&o(l,"id",$),t[0]&64&&p!==(p=e[29].x)&&o(l,"x",p),t[0]&64&&h!==(h=e[29].y)&&o(l,"y",h),t[0]&64&&k!==(k=e[29].x)&&o(y,"x1",k),t[0]&64&&g!==(g=e[29].y)&&o(y,"y1",g),t[0]&64&&m!==(m=e[29].org_x)&&o(y,"x2",m),t[0]&64&&S!==(S=e[29].org_y)&&o(y,"y2",S),t[0]&64&&M!==(M=e[29].org_x)&&o(d,"cx",M),t[0]&64&&b!==(b=e[29].org_y)&&o(d,"cy",b)},d(s){s&&w(l),s&&w(y),s&&w(d)}}}function je(r){let e,l,n,_,$,p,h,y,k,g,m=[],S=new Map,d,M=[],b=new Map,s,t=r[4].ftools;const a=i=>i[29].name;for(let i=0;i<t.length;i+=1){let f=ge(r,t,i),x=a(f);S.set(x,m[i]=pe(x,f))}let c=r[6];const v=i=>i[29].name;for(let i=0;i<c.length;i+=1){let f=ce(r,c,i),x=v(f);b.set(x,M[i]=ye(x,f))}return{c(){e=I("g"),l=I("g"),n=I("text"),_=le(`Temporal Span
      `),p=I("g"),h=I("text"),y=le(`Spatial Span
      `),g=I("g");for(let i=0;i<m.length;i+=1)m[i].c();d=I("g");for(let i=0;i<M.length;i+=1)M[i].c();this.h()},l(i){e=B(i,"g",{class:!0,transform:!0});var f=C(e);l=B(f,"g",{class:!0});var x=C(l);n=B(x,"text",{opacity:!0,fill:!0,y:!0,dy:!0,"font-size":!0,"text-anchor":!0,transform:!0});var A=C(n);_=ae(A,`Temporal Span
      `),A.forEach(w),x.forEach(w),p=B(f,"g",{class:!0});var T=C(p);h=B(T,"text",{opacity:!0,fill:!0,y:!0,dy:!0,"font-size":!0,"text-anchor":!0,transform:!0});var j=C(h);y=ae(j,`Spatial Span
      `),j.forEach(w),T.forEach(w),g=B(f,"g",{class:!0});var D=C(g);for(let V=0;V<m.length;V+=1)m[V].l(D);D.forEach(w),d=B(f,"g",{class:!0});var N=C(d);for(let V=0;V<M.length;V+=1)M[V].l(N);N.forEach(w),f.forEach(w),this.h()},h(){o(n,"opacity","1"),o(n,"fill","currentColor"),o(n,"y","9"),o(n,"dy","0.71em"),o(n,"font-size","12px"),o(n,"text-anchor","middle"),o(n,"transform",$="translate("+r[3]/2+" -50)"),o(l,"class","xaxis"),o(h,"opacity","1"),o(h,"fill","currentColor"),o(h,"y","9"),o(h,"dy","0.71em"),o(h,"font-size","12px"),o(h,"text-anchor","middle"),o(h,"transform",k="rotate(270) translate("+-r[2]/2+" "+-r[3]/15+")"),o(p,"class","yaxis"),o(g,"class","rects"),o(d,"class","labels"),o(e,"class","main"),o(e,"transform",s="translate("+r[3]/10+" "+r[2]/15+") scale(0.8 0.9)")},m(i,f){L(i,e,f),q(e,l),q(l,n),q(n,_),r[19](l),q(e,p),q(p,h),q(h,y),r[20](p),q(e,g);for(let x=0;x<m.length;x+=1)m[x].m(g,null);q(e,d);for(let x=0;x<M.length;x+=1)M[x].m(d,null);r[21](d)},p(i,f){f[0]&8&&$!==($="translate("+i[3]/2+" -50)")&&o(n,"transform",$),f[0]&12&&k!==(k="rotate(270) translate("+-i[2]/2+" "+-i[3]/15+")")&&o(h,"transform",k),f[0]&129180&&(t=i[4].ftools,m=_e(m,f,a,1,i,t,S,g,me,pe,null,ge)),f[0]&64&&(c=i[6],M=_e(M,f,v,1,i,c,b,d,me,ye,null,ce)),f[0]&12&&s!==(s="translate("+i[3]/10+" "+i[2]/15+") scale(0.8 0.9)")&&o(e,"transform",s)},d(i){i&&w(e),r[19](null),r[20](null);for(let f=0;f<m.length;f+=1)m[f].d();for(let f=0;f<M.length;f+=1)M[f].d();r[21](null)}}}function De(r){let e,l;return e=new de({props:{$$slots:{default:[je]},$$scope:{ctx:r}}}),{c(){J(e.$$.fragment)},l(n){X(e.$$.fragment,n)},m(n,_){F(e,n,_),l=!0},p(n,_){const $={};_[0]&255|_[1]&8&&($.$$scope={dirty:_,ctx:n}),e.$set($)},i(n){l||(G(e.$$.fragment,n),l=!0)},o(n){K(e.$$.fragment,n),l=!1},d(n){P(e,n)}}}function ne(r){return r.name.toLowerCase().replace(/[^A-Za-z0-9]/g,"")}const Ne=()=>{},Ie=()=>{};function Be(r,e,l){let n,_,$,p,h,y,k;const{data:g,width:m,height:S}=ve("LayerCake");W(r,g,u=>l(4,k=u)),W(r,m,u=>l(3,y=u)),W(r,S,u=>l(2,h=u));function d(u,z){return b(u)+(s(u)-b(u))/2}function M(u,z){return t(u)+(a(u)-t(u))/2}function b(u,z){return n(u.highest_temporal_resolution?u.highest_temporal_resolution:"N/A")-p}function s(u,z){return n(u.largest_temporal_scope?u.largest_temporal_scope:"N/A")+p}function t(u,z){return _(u.highest_spatial_resolution?u.highest_spatial_resolution:"N/A")-p}function a(u,z){return _(u.largest_spatial_scope?u.largest_spatial_scope:"N/A")+p}function c(u,z){return Math.abs(b(u)-s(u))}function v(u,z){return Math.abs(t(u)-a(u))}let i=null,f=null;function x(u){return function(){Q(this).attr("stroke-width",3),Q("#"+ne(u)).attr("font-weight","bold")}}function A(u){return function(){Q(this).attr("stroke-width",1),Q("#"+ne(u)).attr("font-weight","normal")}}let T=null,j={label:()=>[]};function D(u,z,H){return j.label()}let N=[];function V(u){se[u?"unshift":"push"](()=>{i=u,l(0,i)})}function O(u){se[u?"unshift":"push"](()=>{f=u,l(1,f)})}function Z(u){se[u?"unshift":"push"](()=>{T=u,l(5,T)})}return r.$$.update=()=>{r.$$.dirty[0]&8&&l(18,n=fe().domain(["","instant","milliseconds","seconds","minutes","hours","days","months","years","decades","N/A"]).range([0,y])),r.$$.dirty[0]&4&&l(17,_=fe().domain(["","component","device","facility","municipality","county","state","region","country","continent","global","N/A"]).range([0,h])),r.$$.dirty[0]&16&&l(7,$=we().domain(k.tools).range(xe)),r.$$.dirty[0]&393219&&(Q(i).call($e(n)),Q(f).call(ke(_))),r.$$.dirty[0]&28&&(j=Ve().label(k.ftools.map(u=>{const z=d(u),H=M(u);return{name:u.name,x:z,y:H,org_x:z,org_y:H,width:18,height:7.2}})).anchor(k.ftools.map(u=>({x:d(u),y:M(u),r:10}))).width(y).height(h).start(1500)),r.$$.dirty[0]&28&&l(6,N=D(k.ftools))},p=5,[i,f,h,y,k,T,N,$,g,m,S,b,t,c,v,x,A,_,n,V,O,Z]}class qe extends oe{constructor(e){super();ie(this,e,Be,De,ue,{},null,[-1,-1])}}function He(r){let e,l;return e=new qe({}),{c(){J(e.$$.fragment)},l(n){X(e.$$.fragment,n)},m(n,_){F(e,n,_),l=!0},i(n){l||(G(e.$$.fragment,n),l=!0)},o(n){K(e.$$.fragment,n),l=!1},d(n){P(e,n)}}}function Oe(r){let e,l,n,_,$,p,h,y,k,g,m,S,d,M,b,s,t;return h=new Te({}),g=new Ae({}),d=new Ce({}),s=new Ee({props:{data:r[0],$$slots:{default:[He]},$$scope:{ctx:r}}}),{c(){e=Y(),l=R("div"),n=R("h1"),_=le("Spatial Temporal Visualization"),$=Y(),p=R("div"),J(h.$$.fragment),y=Y(),k=R("div"),J(g.$$.fragment),m=Y(),S=R("div"),J(d.$$.fragment),M=Y(),b=R("div"),J(s.$$.fragment),this.h()},l(a){Se('[data-svelte="svelte-1dpoyov"]',document.head).forEach(w),e=ee(a),l=U(a,"DIV",{class:!0});var v=C(l);n=U(v,"H1",{class:!0});var i=C(n);_=ae(i,"Spatial Temporal Visualization"),i.forEach(w),v.forEach(w),$=ee(a),p=U(a,"DIV",{class:!0});var f=C(p);X(h.$$.fragment,f),f.forEach(w),y=ee(a),k=U(a,"DIV",{class:!0});var x=C(k);X(g.$$.fragment,x),x.forEach(w),m=ee(a),S=U(a,"DIV",{class:!0});var A=C(S);X(d.$$.fragment,A),A.forEach(w),M=ee(a),b=U(a,"DIV",{class:!0});var T=C(b);X(s.$$.fragment,T),T.forEach(w),this.h()},h(){document.title="Spatial Temporal Visualization",o(n,"class","text-4xl font-medium leading-tight mt-0 mb-2"),o(l,"class","grid mx-20 mt-6"),o(p,"class","grid mx-20 my-4 place-items-center"),o(k,"class","grid mx-20 my-4 place-items-center"),o(S,"class","grid mx-20 my-4 place-items-center"),o(b,"class","grid my-4 w-full h-1/2 place-items-center")},m(a,c){L(a,e,c),L(a,l,c),q(l,n),q(n,_),L(a,$,c),L(a,p,c),F(h,p,null),L(a,y,c),L(a,k,c),F(g,k,null),L(a,m,c),L(a,S,c),F(d,S,null),L(a,M,c),L(a,b,c),F(s,b,null),t=!0},p(a,[c]){const v={};c&1&&(v.data=a[0]),c&16&&(v.$$scope={dirty:c,ctx:a}),s.$set(v)},i(a){t||(G(h.$$.fragment,a),G(g.$$.fragment,a),G(d.$$.fragment,a),G(s.$$.fragment,a),t=!0)},o(a){K(h.$$.fragment,a),K(g.$$.fragment,a),K(d.$$.fragment,a),K(s.$$.fragment,a),t=!1},d(a){a&&w(e),a&&w(l),a&&w($),a&&w(p),P(h),a&&w(y),a&&w(k),P(g),a&&w(m),a&&w(S),P(d),a&&w(M),a&&w(b),P(s)}}}function Ze(r,e,l){let n,_,$;W(r,ze,h=>l(1,_=h)),W(r,Le,h=>l(2,$=h));function p(h){return{ftools:h,tools:$}}return r.$$.update=()=>{r.$$.dirty&2&&l(0,n=p(_))},[n,_]}class Ke extends oe{constructor(e){super();ie(this,e,Ze,Oe,ue,{})}}export{Ke as default};
