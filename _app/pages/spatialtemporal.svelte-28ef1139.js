import{S as pe,i as ye,s as de,ae as xe,w as J,x as K,y as R,q as O,o as Q,B as Y,F as $e,K as U,af as se,ag as be,ah as ke,ai as te,aj as Me,ak as Ee,al as j,am as B,a as T,d,b as s,g as D,Y as ae,an as ie,_ as Se,t as Z,h as G,J as C,j as ve,$ as ue,a0 as fe,ao as oe,k as re,e as F,l as _e,ab as Te,m as le,c as H,p as Ve,n as Ie,ap as De,I as we,a3 as Ae,a2 as Ce,R as Le}from"../chunks/vendor-c88585d4.js";import{A as Ne}from"../chunks/Autocomplete-60432e94.js";import{L as ze}from"../chunks/LanguageChipBox-368f0e04.js";import{T as qe}from"../chunks/ToolChipBox-b352f802.js";import{f as je,t as Be,l as Oe,a as Qe}from"../chunks/stores-dc1bf04e.js";function Fe(){let l=[],e=[],t=1,n=1,f=5,g=.5,_=.2,c=1,m=30,x=30,h=3;function v(o,r,y){let k=r.length,w=0,u=r[o].x-y[o].x,a=y[o].y-r[o].y,p=Math.sqrt(u*u+a*a),S=!0;p>0&&(w+=p*_),u/=p,a/=p,u>0&&a>0?w+=0*h:u<0&&a>0?w+=1*h:u<0&&a<0?w+=2*h:w+=3*h;let L=r[o].x,N=r[o].y-r[o].height+2,A=r[o].x+r[o].width,z=r[o].y+2,q,P,W,X,ee,i,I;for(let M=0;M<k;M++)M!=o&&(S=b(y[o].x,r[o].x,y[M].x,r[M].x,y[o].y,r[o].y,y[M].y,r[M].y),S&&(w+=c),q=r[M].x,W=r[M].y-r[M].height+2,P=r[M].x+r[M].width,X=r[M].y+2,ee=Math.max(0,Math.min(P,A)-Math.max(q,L)),i=Math.max(0,Math.min(X,z)-Math.max(W,N)),I=ee*i,w+=I*m),q=y[M].x-y[M].r,W=y[M].y-y[M].r,P=y[M].x+y[M].r,X=y[M].y+y[M].r,ee=Math.max(0,Math.min(P,A)-Math.max(q,L)),i=Math.max(0,Math.min(X,z)-Math.max(W,N)),I=ee*i,w+=I*x;return w}function V(o){let r=Math.floor(Math.random()*l.length),y=l[r].x,k=l[r].y,w=v(r,l,e);l[r].x+=(Math.random()-.5)*f,l[r].y+=(Math.random()-.5)*f,l[r].x>t&&(l[r].x=y),l[r].x<0&&(l[r].x=y),l[r].y>n&&(l[r].y=k),l[r].y<0&&(l[r].y=k);let a=v(r,l,e)-w;Math.random()<Math.exp(-a/o)||(l[r].x=y,l[r].y=k)}function $(o){let r=Math.floor(Math.random()*l.length),y=l[r].x,k=l[r].y,w=v(r,l,e),u=(Math.random()-.5)*g,a=Math.sin(u),p=Math.cos(u);l[r].x-=e[r].x,l[r].y-=e[r].y;let S=l[r].x*p-l[r].y*a,L=l[r].x*a+l[r].y*p;l[r].x=S+e[r].x,l[r].y=L+e[r].y,l[r].x>t&&(l[r].x=y),l[r].x<0&&(l[r].x=y),l[r].y>n&&(l[r].y=k),l[r].y<0&&(l[r].y=k);let A=v(r,l,e)-w;Math.random()<Math.exp(-A/o)||(l[r].x=y,l[r].y=k)}function b(o,r,y,k,w,u,a,p){let S,L,N,A,z;return N=(p-a)*(r-o)-(k-y)*(u-w),A=(k-y)*(w-a)-(p-a)*(o-y),z=(r-o)*(w-a)-(u-w)*(o-y),S=A/N,L=z/N,!(S<0||S>1||L<0||L>1)}function E(o,r,y){return o-r/y}return{start(o){let r=l.length,y=1,k=1;for(let w=0;w<o;w++){for(let u=0;u<r;u++)Math.random()<.5?V(y):$(y);y=E(y,k,o)}return this},width(o){return arguments.length?(t=o,this):t},height(o){return arguments.length?(n=o,this):n},label(o){return arguments.length?(l=o,this):l},anchor(o){return arguments.length?(e=o,this):e}}}function he(l,e,t){const n=l.slice();return n[31]=e[t],n}function me(l,e,t){const n=l.slice();return n[31]=e[t],n}function ce(l,e){let t,n,f,g,_,c,m,x;return{key:l,first:null,c(){t=j("rect"),this.h()},l(h){t=B(h,"rect",{fill:!0,"stroke-dasharray":!0,"fill-opacity":!0,x:!0,y:!0,width:!0,height:!0,"stroke-width":!0,stroke:!0}),T(t).forEach(d),this.h()},h(){s(t,"fill",n=e[7](e[31])),s(t,"stroke-dasharray","4"),s(t,"fill-opacity","0.25"),s(t,"x",f=e[11](e[31],e[4])),s(t,"y",g=e[12](e[31],e[3])),s(t,"width",_=e[13](e[31],e[4])),s(t,"height",c=e[14](e[31],e[3])),s(t,"stroke-width","1"),s(t,"stroke","black"),this.first=t},m(h,v){D(h,t,v),m||(x=[ae(t,"mouseover",function(){ie(e[15](e[31]))&&e[15](e[31]).apply(this,arguments)}),ae(t,"focus",Ke),ae(t,"mouseout",function(){ie(e[16](e[31]))&&e[16](e[31]).apply(this,arguments)}),ae(t,"blur",Re)],m=!0)},p(h,v){e=h,v[0]&132&&n!==(n=e[7](e[31]))&&s(t,"fill",n),v[0]&20&&f!==(f=e[11](e[31],e[4]))&&s(t,"x",f),v[0]&12&&g!==(g=e[12](e[31],e[3]))&&s(t,"y",g),v[0]&20&&_!==(_=e[13](e[31],e[4]))&&s(t,"width",_),v[0]&12&&c!==(c=e[14](e[31],e[3]))&&s(t,"height",c)},d(h){h&&d(t),m=!1,Se(x)}}}function ge(l,e){let t,n=e[31].name+"",f,g,_,c,m,x,h,v,V,$,b,E;return{key:l,first:null,c(){t=j("text"),f=Z(n),m=j("line"),$=j("circle"),this.h()},l(o){t=B(o,"text",{class:!0,id:!0,x:!0,y:!0});var r=T(t);f=G(r,n),r.forEach(d),m=B(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0}),T(m).forEach(d),$=B(o,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),T($).forEach(d),this.h()},h(){s(t,"class","place-label"),s(t,"id",g=ne(e[31])),s(t,"x",_=e[31].x),s(t,"y",c=e[31].y),s(m,"x1",x=e[31].x),s(m,"y1",h=e[31].y),s(m,"x2",v=e[31].org_x),s(m,"y2",V=e[31].org_y),s(m,"stroke","black"),s($,"cx",b=e[31].org_x),s($,"cy",E=e[31].org_y),s($,"r","2"),s($,"fill","black"),this.first=t},m(o,r){D(o,t,r),C(t,f),D(o,m,r),D(o,$,r)},p(o,r){e=o,r[0]&64&&n!==(n=e[31].name+"")&&ve(f,n),r[0]&64&&g!==(g=ne(e[31]))&&s(t,"id",g),r[0]&64&&_!==(_=e[31].x)&&s(t,"x",_),r[0]&64&&c!==(c=e[31].y)&&s(t,"y",c),r[0]&64&&x!==(x=e[31].x)&&s(m,"x1",x),r[0]&64&&h!==(h=e[31].y)&&s(m,"y1",h),r[0]&64&&v!==(v=e[31].org_x)&&s(m,"x2",v),r[0]&64&&V!==(V=e[31].org_y)&&s(m,"y2",V),r[0]&64&&b!==(b=e[31].org_x)&&s($,"cx",b),r[0]&64&&E!==(E=e[31].org_y)&&s($,"cy",E)},d(o){o&&d(t),o&&d(m),o&&d($)}}}function He(l){let e,t,n,f,g,_,c,m,x,h,v=[],V=new Map,$,b=[],E=new Map,o,r=l[2];const y=u=>u[31].name;for(let u=0;u<r.length;u+=1){let a=me(l,r,u),p=y(a);V.set(p,v[u]=ce(p,a))}let k=l[6];const w=u=>u[31].name;for(let u=0;u<k.length;u+=1){let a=he(l,k,u),p=w(a);E.set(p,b[u]=ge(p,a))}return{c(){e=j("g"),t=j("g"),n=j("text"),f=Z(`Temporal Span
      `),_=j("g"),c=j("text"),m=Z(`Spatial Span
      `),h=j("g");for(let u=0;u<v.length;u+=1)v[u].c();$=j("g");for(let u=0;u<b.length;u+=1)b[u].c();this.h()},l(u){e=B(u,"g",{class:!0,transform:!0});var a=T(e);t=B(a,"g",{class:!0});var p=T(t);n=B(p,"text",{opacity:!0,fill:!0,y:!0,dy:!0,"font-size":!0,"text-anchor":!0,transform:!0});var S=T(n);f=G(S,`Temporal Span
      `),S.forEach(d),p.forEach(d),_=B(a,"g",{class:!0});var L=T(_);c=B(L,"text",{opacity:!0,fill:!0,y:!0,dy:!0,"font-size":!0,"text-anchor":!0,transform:!0});var N=T(c);m=G(N,`Spatial Span
      `),N.forEach(d),L.forEach(d),h=B(a,"g",{class:!0});var A=T(h);for(let q=0;q<v.length;q+=1)v[q].l(A);A.forEach(d),$=B(a,"g",{class:!0});var z=T($);for(let q=0;q<b.length;q+=1)b[q].l(z);z.forEach(d),a.forEach(d),this.h()},h(){s(n,"opacity","1"),s(n,"fill","currentColor"),s(n,"y","9"),s(n,"dy","0.71em"),s(n,"font-size","12px"),s(n,"text-anchor","middle"),s(n,"transform",g="translate("+l[4]/2+" -50)"),s(t,"class","xaxis"),s(c,"opacity","1"),s(c,"fill","currentColor"),s(c,"y","9"),s(c,"dy","0.71em"),s(c,"font-size","12px"),s(c,"text-anchor","middle"),s(c,"transform",x="rotate(270) translate("+-l[3]/2+" "+-l[4]/15+")"),s(_,"class","yaxis"),s(h,"class","rects"),s($,"class","labels"),s(e,"class","main"),s(e,"transform",o="translate("+l[4]/10+" "+l[3]/5+") scale(0.8 1)")},m(u,a){D(u,e,a),C(e,t),C(t,n),C(n,f),l[20](t),C(e,_),C(_,c),C(c,m),l[21](_),C(e,h);for(let p=0;p<v.length;p+=1)v[p].m(h,null);C(e,$);for(let p=0;p<b.length;p+=1)b[p].m($,null);l[22]($)},p(u,a){a[0]&16&&g!==(g="translate("+u[4]/2+" -50)")&&s(n,"transform",g),a[0]&24&&x!==(x="rotate(270) translate("+-u[3]/2+" "+-u[4]/15+")")&&s(c,"transform",x),a[0]&129180&&(r=u[2],v=ue(v,a,y,1,u,r,V,h,fe,ce,null,me)),a[0]&64&&(k=u[6],b=ue(b,a,w,1,u,k,E,$,fe,ge,null,he)),a[0]&24&&o!==(o="translate("+u[4]/10+" "+u[3]/5+") scale(0.8 1)")&&s(e,"transform",o)},d(u){u&&d(e),l[20](null),l[21](null);for(let a=0;a<v.length;a+=1)v[a].d();for(let a=0;a<b.length;a+=1)b[a].d();l[22](null)}}}function Je(l){let e,t;return e=new xe({props:{$$slots:{default:[He]},$$scope:{ctx:l}}}),{c(){J(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,f){R(e,n,f),t=!0},p(n,f){const g={};f[0]&255|f[1]&32&&(g.$$scope={dirty:f,ctx:n}),e.$set(g)},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){Q(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function ne(l){return l.name.toLowerCase().replace(/[^A-Za-z0-9]/g,"")}const Ke=()=>{},Re=()=>{};function Ye(l,e,t){let n,f,g,_,c,m,x,h;const{data:v,width:V,height:$}=$e("LayerCake");U(l,v,i=>t(19,h=i)),U(l,V,i=>t(4,x=i)),U(l,$,i=>t(3,m=i));function b(i,I,M){return Math.abs(y(i)-r(i))*Math.abs(w(i)-k(i))}function E(i,I){return r(i)+(y(i)-r(i))/2}function o(i,I){return k(i)+(w(i)-k(i))/2}function r(i,I){return n(i.highest_temporal_resolution?i.highest_temporal_resolution:"N/A")-_}function y(i,I){return n(i.largest_temporal_scope?i.largest_temporal_scope:"N/A")+_}function k(i,I){return f(i.highest_spatial_resolution?i.highest_spatial_resolution:"N/A")-_}function w(i,I){return f(i.largest_spatial_scope?i.largest_spatial_scope:"N/A")+_}function u(i,I){return Math.abs(r(i)-y(i))}function a(i,I){return Math.abs(k(i)-w(i))}let p=null,S=null;function L(i){return function(){te(this).attr("stroke-width",3),te("#"+ne(i)).attr("font-weight","bold")}}function N(i){return function(){te(this).attr("stroke-width",1),te("#"+ne(i)).attr("font-weight","normal")}}let A=null,z={label:()=>[]};function q(i,I,M){return z.label()}let P=[];function W(i){oe[i?"unshift":"push"](()=>{p=i,t(0,p)})}function X(i){oe[i?"unshift":"push"](()=>{S=i,t(1,S)})}function ee(i){oe[i?"unshift":"push"](()=>{A=i,t(5,A)})}return l.$$.update=()=>{l.$$.dirty[0]&16&&t(18,n=se().domain(["","instant","milliseconds","seconds","minutes","hours","days","months","years","decades","N/A"]).range([0,x])),l.$$.dirty[0]&8&&t(17,f=se().domain(["","component","device","facility","municipality","county","state","region","country","continent","global","N/A"]).range([0,m])),l.$$.dirty[0]&524288&&t(7,g=be().domain(h.tools).range(ke)),l.$$.dirty[0]&524312&&t(2,c=h.ftools.sort((i,I)=>b(i)<b(I)?1:b(i)>b(I)?-1:0)),l.$$.dirty[0]&393219&&(te(p).call(Me(n)),te(S).call(Ee(f))),l.$$.dirty[0]&28&&(z=Fe().label(c.map(i=>{const I=E(i),M=o(i);return{name:i.name,x:I,y:M,org_x:I,org_y:M,width:18,height:7.2}})).anchor(c.map(i=>({x:E(i),y:o(i),r:10}))).width(x).height(m).start(1500)),l.$$.dirty[0]&28&&t(6,P=q())},_=5,[p,S,c,m,x,A,P,g,v,V,$,r,k,u,a,L,N,f,n,h,W,X,ee]}class Ze extends pe{constructor(e){super();ye(this,e,Ye,Je,de,{},null,[-1,-1])}}function Ge(l){let e,t,n;return t=new De({props:{data:l[0],$$slots:{default:[We]},$$scope:{ctx:l}}}),{c(){e=F("div"),J(t.$$.fragment),this.h()},l(f){e=H(f,"DIV",{class:!0});var g=T(e);K(t.$$.fragment,g),g.forEach(d),this.h()},h(){s(e,"class","grid my-4 w-full h-1/2 place-items-center")},m(f,g){D(f,e,g),R(t,e,null),n=!0},p(f,g){const _={};g&1&&(_.data=f[0]),g&128&&(_.$$scope={dirty:g,ctx:f}),t.$set(_)},i(f){n||(O(t.$$.fragment,f),n=!0)},o(f){Q(t.$$.fragment,f),n=!1},d(f){f&&d(e),Y(t)}}}function Pe(l){let e,t,n,f,g,_,c;return n=new we({props:{class:"w-4 h-4 mr-2 fill-current",data:Ae}}),{c(){e=F("div"),t=F("div"),J(n.$$.fragment),f=Z("\n      No tools found matching filter `"),g=Z(l[3]),_=Z("`."),this.h()},l(m){e=H(m,"DIV",{class:!0});var x=T(e);t=H(x,"DIV",{class:!0,role:!0});var h=T(t);K(n.$$.fragment,h),f=G(h,"\n      No tools found matching filter `"),g=G(h,l[3]),_=G(h,"`."),h.forEach(d),x.forEach(d),this.h()},h(){s(t,"class","bg-yellow-100 rounded-lg py-5 px-6 mb-3 text-base text-yellow-700 inline-flex items-center w-full"),s(t,"role","alert"),s(e,"class","grid-flow-row w-full items-stretch")},m(m,x){D(m,e,x),C(e,t),R(n,t,null),C(t,f),C(t,g),C(t,_),c=!0},p(m,x){(!c||x&8)&&ve(g,m[3])},i(m){c||(O(n.$$.fragment,m),c=!0)},o(m){Q(n.$$.fragment,m),c=!1},d(m){m&&d(e),Y(n)}}}function Ue(l){let e,t,n,f,g;return n=new we({props:{class:"w-4 h-4 mr-2 fill-current",data:Ce,spin:!0}}),{c(){e=F("div"),t=F("div"),J(n.$$.fragment),f=Z(`
      Loading...`),this.h()},l(_){e=H(_,"DIV",{class:!0});var c=T(e);t=H(c,"DIV",{class:!0,role:!0});var m=T(t);K(n.$$.fragment,m),f=G(m,`
      Loading...`),m.forEach(d),c.forEach(d),this.h()},h(){s(t,"class","bg-yellow-100 rounded-lg py-5 px-6 mb-3 text-base text-yellow-700 inline-flex items-center w-full"),s(t,"role","alert"),s(e,"class","grid-flow-row mx-20 my-4")},m(_,c){D(_,e,c),C(e,t),R(n,t,null),C(t,f),g=!0},p:Le,i(_){g||(O(n.$$.fragment,_),g=!0)},o(_){Q(n.$$.fragment,_),g=!1},d(_){_&&d(e),Y(n)}}}function We(l){let e,t;return e=new Ze({}),{c(){J(e.$$.fragment)},l(n){K(e.$$.fragment,n)},m(n,f){R(e,n,f),t=!0},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){Q(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function Xe(l){let e,t,n,f,g,_,c,m,x,h,v,V,$,b,E,o,r,y;c=new Ne({}),h=new qe({}),$=new ze({});const k=[Ue,Pe,Ge],w=[];function u(a,p){return a[2]?0:a[1]?1:2}return E=u(l),o=w[E]=k[E](l),{c(){e=re(),t=F("div"),n=F("h1"),f=Z("Spatial Temporal Visualization"),g=re(),_=F("div"),J(c.$$.fragment),m=re(),x=F("div"),J(h.$$.fragment),v=re(),V=F("div"),J($.$$.fragment),b=re(),o.c(),r=_e(),this.h()},l(a){Te('[data-svelte="svelte-1dpoyov"]',document.head).forEach(d),e=le(a),t=H(a,"DIV",{class:!0});var S=T(t);n=H(S,"H1",{class:!0});var L=T(n);f=G(L,"Spatial Temporal Visualization"),L.forEach(d),S.forEach(d),g=le(a),_=H(a,"DIV",{class:!0});var N=T(_);K(c.$$.fragment,N),N.forEach(d),m=le(a),x=H(a,"DIV",{class:!0});var A=T(x);K(h.$$.fragment,A),A.forEach(d),v=le(a),V=H(a,"DIV",{class:!0});var z=T(V);K($.$$.fragment,z),z.forEach(d),b=le(a),o.l(a),r=_e(),this.h()},h(){document.title="Spatial Temporal Visualization",s(n,"class","text-4xl font-medium leading-tight mt-0 mb-2"),s(t,"class","grid mx-20 mt-6"),s(_,"class","grid mx-20 my-4 place-items-center"),s(x,"class","grid mx-20 my-4 place-items-center"),s(V,"class","grid mx-20 my-4 place-items-center")},m(a,p){D(a,e,p),D(a,t,p),C(t,n),C(n,f),D(a,g,p),D(a,_,p),R(c,_,null),D(a,m,p),D(a,x,p),R(h,x,null),D(a,v,p),D(a,V,p),R($,V,null),D(a,b,p),w[E].m(a,p),D(a,r,p),y=!0},p(a,[p]){let S=E;E=u(a),E===S?w[E].p(a,p):(Ie(),Q(w[S],1,1,()=>{w[S]=null}),Ve(),o=w[E],o?o.p(a,p):(o=w[E]=k[E](a),o.c()),O(o,1),o.m(r.parentNode,r))},i(a){y||(O(c.$$.fragment,a),O(h.$$.fragment,a),O($.$$.fragment,a),O(o),y=!0)},o(a){Q(c.$$.fragment,a),Q(h.$$.fragment,a),Q($.$$.fragment,a),Q(o),y=!1},d(a){a&&d(e),a&&d(t),a&&d(g),a&&d(_),Y(c),a&&d(m),a&&d(x),Y(h),a&&d(v),a&&d(V),Y($),a&&d(b),w[E].d(a),a&&d(r)}}}function et(l,e,t){let n,f,g,_,c,m;U(l,je,h=>t(4,g=h)),U(l,Be,h=>t(5,_=h)),U(l,Oe,h=>t(2,c=h)),U(l,Qe,h=>t(3,m=h));function x(h){return{ftools:h,tools:_}}return l.$$.update=()=>{l.$$.dirty&16&&t(0,n=x(g)),l.$$.dirty&1&&t(1,f=n.ftools.length===0)},[n,f,c,m,g]}class ot extends pe{constructor(e){super();ye(this,e,et,Xe,de,{})}}export{ot as default};
